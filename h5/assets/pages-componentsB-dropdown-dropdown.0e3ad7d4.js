import{m as t,k as e,d as a,o as n,c as i,w as o,a as s,l,q as d,i as u,b as r,r as c,u as m,f as p,t as _,p as f,F as h,g as y}from"./index.639d3d9d.js";import{_ as w}from"./u-overlay.d6cc6c6f.js";import{r as g}from"./uni-app.es.f87317fd.js";import{_ as b}from"./plugin-vue_export-helper.21dcd24c.js";import{_ as S}from"./u-icon.8fecb8b7.js";import"./u-transition.bbe9f451.js";var k=b({name:"u-drawdown-item",mixins:[t,e,{props:{value:{type:[Number,String,Array],default:""},title:{type:[String,Number],default:""},options:{type:Array,default:()=>[]},disabled:{type:Boolean,default:!1},height:{type:[Number,String],default:"auto"},closeOnClickOverlay:{type:Boolean,default:!0}}}],data:()=>({show:!1,top:"126px",animationData:{}}),mounted(){this.init()},watch:{dataChange(t,e){this.updateParentData()}},computed:{dataChange(){return[this.title,this.disabled]},style(){const t={zIndex:10071,position:"fixed",display:"flex",left:0,right:0};return t.top=uni.$u.addUnit(this.top),t}},methods:{init(){this.updateParentData()},updateParentData(){this.getParentData("u-dropdown"),this.parent||uni.$u.error("u-dropdown-item必须配合u-dropdown使用");const t=this.parent.menuList.findIndex((t=>t.title===this.title)),e={title:this.title,disabled:this.disabled};t>=0?this.parent.menuList[t]=e:this.parent.menuList.push(e)},async setContentAnimate(t){this.animating=!0;const e=uni.createAnimation({timingFunction:"ease-in-out"});e.height(t).step({duration:this.duration}).step(),this.animationData=e.export(),uni.$u.sleep(this.duration).then((()=>{this.animating=!1}))},overlayClick(){this.show=!1,this.setContentAnimate(0)}}},[["render",function(t,e,r,c,m,p){const _=g(a("u-overlay"),w),f=u;return n(),i(f,{class:"u-drawdown-item"},{default:o((()=>[s(_,{customStyle:"top: 126px",show:m.show,closeOnClickOverlay:t.closeOnClickOverlay,onClick:p.overlayClick},null,8,["show","closeOnClickOverlay","onClick"]),s(f,{class:"u-drawdown-item__content",style:d([p.style]),animation:m.animationData,ref:"animation"},{default:o((()=>[l(t.$slots,"default",{},void 0,!0)])),_:3},8,["style","animation"])])),_:3})}],["__scopeId","data-v-5a86dac8"]]);var v=b({name:"u-dropdown",mixins:[e,{props:{activeStyle:{type:[String,Object],default:()=>({color:"#2979ff",fontSize:"14px"})},inactiveStyle:{type:[String,Object],default:()=>({color:"#606266",fontSize:"14px"})},closeOnClickMask:{type:Boolean,default:!0},closeOnClickSelf:{type:Boolean,default:!0},duration:{type:[Number,String],default:300},height:{type:[Number,String],default:40},borderBottom:{type:Boolean,default:!1},titleSize:{type:[Number,String],default:14},borderRadius:{type:[Number,String],default:0},menuIcon:{type:String,default:"arrow-down"},menuIconSize:{type:[Number,String],default:14}}}],data:()=>({menuList:[],current:0}),computed:{},created(){this.children=[]},methods:{clickHandler(t,e){this.children.map((e=>{e.title===t.title?(e.$emit("click"),e.setContentAnimate(e.show?0:300),e.show=!e.show):(e.show=!1,e.setContentAnimate(0))}))},queryRect(t){return new Promise((e=>{this.$uGetRect(`.${t}`).then((t=>{e(t)}))}))}}},[["render",function(t,e,w,b,k,v){const C=y,x=g(a("u-icon"),S),O=u;return n(),i(O,{class:"u-drawdown"},{default:o((()=>[s(O,{class:"u-dropdown__menu",style:d({height:t.$u.addUnit(t.height)}),ref:"u-dropdown__menu"},{default:o((()=>[(n(!0),r(h,null,c(k.menuList,((e,a)=>(n(),i(O,{class:"u-dropdown__menu__item",key:a,onClick:m((t=>v.clickHandler(e,a)),["stop"])},{default:o((()=>[s(O,{class:"u-dropdown__menu__item__content"},{default:o((()=>[s(C,{class:"u-dropdown__menu__item__content__text",style:d([a===k.current?t.activeStyle:t.inactiveStyle])},{default:o((()=>[p(_(e.title),1)])),_:2},1032,["style"]),s(O,{class:f(["u-dropdown__menu__item__content__arrow",[a===k.current&&"u-dropdown__menu__item__content__arrow--rotate"]])},{default:o((()=>[s(x,{name:t.menuIcon,size:t.$u.addUnit(t.menuIconSize)},null,8,["name","size"])])),_:2},1032,["class"])])),_:2},1024)])),_:2},1032,["onClick"])))),128))])),_:1},8,["style"]),s(O,{class:"u-dropdown__content"},{default:o((()=>[l(t.$slots,"default",{},void 0,!0)])),_:3})])),_:3})}],["__scopeId","data-v-297b2a1a"]]);var C=b({},[["render",function(t,e){const l=y,d=u,r=g(a("u-dropdown-item"),k),c=g(a("u-dropdown"),v);return n(),i(d,{class:"u-page"},{default:o((()=>[s(d,{class:"u-demo-block"},{default:o((()=>[s(l,{class:"u-demo-block__title"},{default:o((()=>[p("基础功能")])),_:1}),s(d,{class:"u-demo-block__content"},{default:o((()=>[s(c,null,{default:o((()=>[s(r,{title:"标题1"},{default:o((()=>[s(d,{class:"",style:{height:"300px"}},{default:o((()=>[p(" 123 ")])),_:1})])),_:1}),s(r,{title:"标题2"},{default:o((()=>[p(" 456 ")])),_:1}),s(r,{title:"标题3"},{default:o((()=>[p(" 789 ")])),_:1}),s(r,{title:"标题4"},{default:o((()=>[p(" abc ")])),_:1})])),_:1})])),_:1})])),_:1})])),_:1})}]]);export{C as default};
